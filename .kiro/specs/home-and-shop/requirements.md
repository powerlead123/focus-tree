# 首页和商城系统需求文档

## 简介

专注小树应用的首页导航和商城激励系统，通过游戏化的方式激励孩子完成专注力训练和口算练习，用获得的小树兑换金币，解锁精美背景图。

## 术语表

- **系统**：专注小树应用
- **用户**：使用应用的孩子
- **小树**：完成专注力训练获得的奖励单位
- **树叶金币**：用小树兑换的虚拟货币
- **拼图块**：背景图被分割成的16个部分
- **背景图**：可用于专注力训练和口算竞速的主题背景
- **商城**：用户使用金币解锁拼图的地方

## 需求

### 需求 1：首页导航

**用户故事：** 作为用户，我想在首页看到清晰的功能入口，以便快速进入我想使用的模块

#### 验收标准

1. WHEN 用户打开应用，THE 系统 SHALL 显示首页
2. WHEN 用户在首页，THE 系统 SHALL 显示四个功能按钮：专注力训练、口算竞速、泡泡单词、商城
3. WHEN 用户点击"专注力训练"，THE 系统 SHALL 跳转到专注力训练页面
4. WHEN 用户点击"口算竞速"，THE 系统 SHALL 跳转到口算竞速页面
5. WHEN 用户点击"泡泡单词"，THE 系统 SHALL 打开外部链接
6. WHEN 用户点击"商城"，THE 系统 SHALL 跳转到商城页面
7. WHEN 用户在首页，THE 系统 SHALL 显示当前拥有的小树数量和金币数量

### 需求 2：小树统计

**用户故事：** 作为用户，我想看到我获得的小树总数，以便了解我的学习成果

#### 验收标准

1. WHEN 用户完成专注力训练，THE 系统 SHALL 记录获得的小树数量
2. WHEN 用户在首页，THE 系统 SHALL 显示累计获得的小树总数
3. WHEN 用户在首页，THE 系统 SHALL 显示可兑换的小树数量（未兑换的）
4. THE 系统 SHALL 将小树数据保存到本地存储

### 需求 3：金币兑换

**用户故事：** 作为用户，我想用小树兑换金币，以便在商城解锁拼图

#### 验收标准

1. WHEN 用户在首页或商城，THE 系统 SHALL 显示"兑换金币"按钮
2. WHEN 用户拥有至少10棵小树，THE 系统 SHALL 启用"兑换金币"按钮
3. WHEN 用户拥有少于10棵小树，THE 系统 SHALL 禁用"兑换金币"按钮并提示需要的数量
4. WHEN 用户点击"兑换金币"，THE 系统 SHALL 显示兑换确认弹窗
5. WHEN 用户确认兑换，THE 系统 SHALL 扣除10棵小树并增加1个金币
6. WHEN 兑换成功，THE 系统 SHALL 显示兑换成功动画和提示
7. WHEN 用户可以兑换多次，THE 系统 SHALL 显示可兑换次数（小树数÷10）

### 需求 4：商城页面

**用户故事：** 作为用户，我想在商城浏览和解锁背景图，以便个性化我的学习环境

#### 验收标准

1. WHEN 用户进入商城，THE 系统 SHALL 显示所有可用的背景图
2. WHEN 用户在商城，THE 系统 SHALL 显示当前拥有的金币数量
3. WHEN 显示背景图，THE 系统 SHALL 以拼图形式展示（4×4网格，共16块）
4. WHEN 背景图未解锁，THE 系统 SHALL 显示拼图块为灰色/模糊状态
5. WHEN 背景图部分解锁，THE 系统 SHALL 显示已解锁的拼图块为彩色清晰状态
6. WHEN 背景图完全解锁，THE 系统 SHALL 显示完整的背景图和"已解锁"标记
7. WHEN 用户在商城，THE 系统 SHALL 显示每张背景图的解锁进度（X/16）

### 需求 5：拼图解锁

**用户故事：** 作为用户，我想用金币解锁拼图块，以便逐步获得完整的背景图

#### 验收标准

1. WHEN 用户点击未解锁的拼图块，THE 系统 SHALL 显示解锁确认弹窗
2. WHEN 显示解锁弹窗，THE 系统 SHALL 提示需要10个金币
3. WHEN 用户金币不足，THE 系统 SHALL 禁用解锁按钮并提示需要更多金币
4. WHEN 用户金币充足，THE 系统 SHALL 启用解锁按钮
5. WHEN 用户确认解锁，THE 系统 SHALL 扣除10个金币并解锁该拼图块
6. WHEN 拼图块解锁，THE 系统 SHALL 播放解锁动画
7. WHEN 拼图块解锁，THE 系统 SHALL 显示该拼图块的完整图像
8. WHEN 16块拼图全部解锁，THE 系统 SHALL 播放完成动画和庆祝效果
9. THE 系统 SHALL 随机解锁拼图块位置，不按顺序

### 需求 6：背景图应用

**用户故事：** 作为用户，我想使用解锁的背景图，以便在学习时享受个性化的视觉体验

#### 验收标准

1. WHEN 用户完全解锁一张背景图，THE 系统 SHALL 将其添加到可用背景列表
2. WHEN 用户在专注力训练设置中，THE 系统 SHALL 显示所有已解锁的背景图供选择
3. WHEN 用户在口算竞速设置中，THE 系统 SHALL 显示所有已解锁的背景图供选择
4. WHEN 用户选择背景图，THE 系统 SHALL 应用该背景到相应模块
5. WHEN 用户未解锁任何背景图，THE 系统 SHALL 使用默认背景
6. THE 系统 SHALL 记住用户为每个模块选择的背景图

### 需求 7：数据持久化

**用户故事：** 作为用户，我想系统记录我的小树、金币和解锁进度，以便下次使用时保留

#### 验收标准

1. THE 系统 SHALL 将小树数量保存到本地存储
2. THE 系统 SHALL 将金币数量保存到本地存储
3. THE 系统 SHALL 将每张背景图的解锁状态保存到本地存储
4. THE 系统 SHALL 将用户选择的背景图保存到本地存储
5. WHEN 用户重新打开应用，THE 系统 SHALL 恢复所有保存的数据

### 需求 8：商城背景图管理

**用户故事：** 作为管理员，我想轻松添加新的背景图，以便丰富商城内容

#### 验收标准

1. THE 系统 SHALL 支持配置多张背景图
2. WHEN 添加背景图，THE 系统 SHALL 要求提供图片URL和名称
3. WHEN 添加背景图，THE 系统 SHALL 自动将其分割为16块拼图
4. THE 系统 SHALL 支持至少10张不同的背景图
5. WHEN 新增背景图，THE 系统 SHALL 自动显示在商城中

### 需求 9：用户反馈

**用户故事：** 作为用户，我想看到清晰的反馈信息，以便了解我的操作结果

#### 验收标准

1. WHEN 用户兑换金币，THE 系统 SHALL 显示兑换成功提示和动画
2. WHEN 用户解锁拼图，THE 系统 SHALL 显示解锁成功提示和动画
3. WHEN 用户完成整张背景图，THE 系统 SHALL 显示庆祝动画和成就提示
4. WHEN 用户金币或小树不足，THE 系统 SHALL 显示友好的提示信息
5. WHEN 用户获得小树，THE 系统 SHALL 在首页显示新增小树的动画

### 需求 10：首页统计展示

**用户故事：** 作为用户，我想在首页看到我的学习统计，以便了解我的进步

#### 验收标准

1. WHEN 用户在首页，THE 系统 SHALL 显示累计获得的小树总数
2. WHEN 用户在首页，THE 系统 SHALL 显示当前拥有的金币数量
3. WHEN 用户在首页，THE 系统 SHALL 显示已解锁的背景图数量
4. WHEN 用户在首页，THE 系统 SHALL 显示最近一次学习的时间
5. WHEN 用户在首页，THE 系统 SHALL 显示连续学习天数（可选）
